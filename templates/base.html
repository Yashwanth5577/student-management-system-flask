<!DOCTYPE html>
<html>
<head>
    <title>Student Management System</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body class="main-bg">

<!-- ================= HEADER ================= -->
<nav class="navbar navbar-expand-lg main-navbar mb-4 shadow-lg">
  <div class="container-fluid align-items-center position-relative">

    <!-- CENTER TITLE -->
    <div class="header-title mx-auto">
      <em>Student Management System</em>
    </div>

    <!-- RIGHT BUTTONS -->
    <div class="d-flex gap-2 position-absolute top-50 end-0 translate-middle-y me-3">
      <button
        class="btn btn-sm theme-btn"
        onclick="toggleDarkMode()"
        aria-label="Toggle dark mode"
        title="Toggle Dark / Light Mode">
        ðŸŒ™
      </button>

      <button
        class="btn btn-sm logout-btn"
        onclick="confirmLogout()"
        aria-label="Logout"
        title="Logout">
        ðŸ”“ Logout
      </button>
    </div>

  </div>
</nav>

<!-- ================= CONTENT ================= -->
<div class="container mt-4">

{% with messages = get_flashed_messages(with_categories=true) %}
{% for category, msg in messages %}
<div class="alert alert-{{ category }} alert-dismissible fade show auto-dismiss" role="alert">
    {{ msg }}
</div>
{% endfor %}
{% endwith %}

{% block content %}{% endblock %}
</div>

<!-- ================= FOOTER ================= -->
<footer class="text-center text-muted mt-5 mb-3">
  Â© 2026 Student Management System | Built with Flask
</footer>

<!-- ================= SCRIPTS ================= -->
<script>
  // Auto-dismiss flash messages
  setTimeout(() => {
    document.querySelectorAll('.auto-dismiss').forEach(alert => {
      alert.classList.remove('show');
      setTimeout(() => alert.remove(), 500);
    });
  }, 5000);

  // Toggle dark mode
  function toggleDarkMode() {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem(
      "theme",
      document.body.classList.contains("dark-mode") ? "dark" : "light"
    );
  }

  window.onload = () => {
    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark-mode");
    }
  };

  // Logout confirmation
  function confirmLogout() {
    if (confirm("Are you sure you want to logout?")) {
      window.location.href = "/logout";
    }
  }
</script>

</body>
</html>
