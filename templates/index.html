{% extends "base.html" %}
{% block content %}

<!-- ===== TOTAL STUDENTS ===== -->
<div class="stats-card text-center">
  <strong>Total Students:</strong> {{ total_students }}
</div>

<!-- ===== BRANCH COUNT ===== -->
<div class="card mb-5">
  <div class="card-body text-center">
    <h6 class="fw-bold mb-3">Branch-wise Student Count</h6>

    {% for branch, count in branch_counts.items() %}
      <span class="badge rounded-pill bg-primary me-2 mb-2 px-4 py-2">
        {{ branch }} : {{ count }}
      </span>
    {% endfor %}
  </div>
</div>

<!-- ===== REGISTRATION TITLE ===== -->
<h3 class="section-title">
  <span class="icon-box">
    <i class="bi bi-person-plus-fill"></i>
  </span>
  Student Registration
</h3>

<!-- ===== REGISTRATION FORM ===== -->
<div class="card mb-5">
  <div class="card-body p-4">

    <form method="POST">

      <div class="mb-3">
        <input class="form-control form-control-lg"
               name="name"
               placeholder="Enter student name"
               required autofocus>
      </div>

      <div class="mb-3">
        <input class="form-control form-control-lg"
               name="roll"
               placeholder="Enter roll number"
               required>
      </div>

      <div class="mb-3">
        <select class="form-control form-control-lg" name="branch" required>
          <option value="">-- Select Branch --</option>
          <option value="CSE">CSE</option>
          <option value="CSE-AI">CSE-AI</option>
          <option value="CSE-AIML">CSE-AIML</option>
          <option value="CSE-DS">CSE-DS</option>
          <option value="CSE-ML">CSE-ML</option>
          <option value="CSE-CyberSecurity">CSE-CyberSecurity</option>
          <option value="ECE">ECE</option>
          <option value="EEE">EEE</option>
          <option value="Mechanical Engineering">Mechanical Engineering</option>
          <option value="Civil Engineering">Civil Engineering</option>
        </select>
      </div>

      <div class="mb-4">
        <input class="form-control form-control-lg"
               name="email"
               type="email"
               placeholder="Enter email address"
               required>
      </div>

      <div class="d-flex flex-wrap gap-3">
        <button id="registerBtn"
                class="btn btn-success"
                onclick="showLoading(this)">
          Register
        </button>

        <a href="{{ url_for('view_students') }}"
           class="btn btn-outline-primary">
          üëÅ View Registered Students
        </a>
      </div>

    </form>

  </div>
</div>

<!-- ===== LOADING SPINNER ===== -->
<script>
  function showLoading(btn) {
    btn.disabled = true;
    btn.innerHTML = `
      <span class="spinner-border spinner-border-sm"></span>
      Registering...
    `;
    btn.form.submit();
  }
</script>

{% endblock %}
